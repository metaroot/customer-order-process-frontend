(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{367:function(e,t,c){},524:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c.n(r),a=c(15),s=c.n(a),i=(c(367),c(11)),o=c(18),j=c(3);function l(){return Object(j.jsxs)("section",{className:"section about-section",children:[Object(j.jsx)("h1",{className:"section-title",children:"about us"}),Object(j.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Molestiae repudiandae architecto qui adipisci in officiis, aperiam sequi atque perferendis eos, autem maiores nisi saepe quisquam hic odio consectetur nobis veritatis quasi explicabo obcaecati doloremque? Placeat ratione hic aspernatur error blanditiis?"})]})}var u=c(19),b=c(122),d=c(113),h=c(32);var m=n.a.createContext();function O(e){var t=e.children,c=n.a.useState(localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[]),r=Object(h.a)(c,2),a=r[0],s=r[1],i=n.a.useState(0),o=Object(h.a)(i,2),l=o[0],b=o[1],O=n.a.useState(0),x=Object(h.a)(O,2),p=x[0],f=x[1];n.a.useEffect((function(){localStorage.setItem("cart",JSON.stringify(a));var e=a.reduce((function(e,t){return e+t.amount*t.price}),0);e=parseFloat(e.toFixed(2)),b(e);var t=a.reduce((function(e,t){return e+t.amount}),0);f(t)}),[a]);var g=function(e){s(Object(d.a)(a).filter((function(t){return t.id!==e})))},v=function(e){var t=Object(d.a)(a).map((function(t){return t.id===e?Object(u.a)(Object(u.a)({},t),{},{amount:t.amount+1}):Object(u.a)({},t)}));s(t)};return Object(j.jsx)(m.Provider,{value:{cart:a,cartItems:p,total:l,removeItem:g,increaseAmount:v,decreaseAmount:function(e,t){if(1!==t){var c=Object(d.a)(a).map((function(t){return t.id===e?Object(u.a)(Object(u.a)({},t),{},{amount:t.amount-1}):Object(u.a)({},t)}));s(c)}else g(e)},addToCart:function(e){var t=e.id,c=e.image,r=e.title,n=e.price;if(Object(d.a)(a).find((function(e){return e.id===t})))v(t);else{var i={id:t,image:c,title:r,price:n,amount:1},o=[].concat(Object(d.a)(a),[i]);s(o)}},clearCart:function(){s([])}},children:t})}function x(e){var t=e.id,c=e.image,r=e.title,a=e.price,s=e.amount,i=n.a.useContext(m),o=i.removeItem,l=i.increaseAmount,u=i.decreaseAmount;return Object(j.jsxs)("article",{className:"cart-item",children:[Object(j.jsx)("img",{src:c,alt:r}),Object(j.jsxs)("div",{children:[Object(j.jsx)("h4",{children:r}),Object(j.jsxs)("h5",{children:["$",a]}),Object(j.jsx)("button",{className:"cart-btn remove-btn",onClick:function(){o(t)},children:"remove"})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{className:"cart-btn amount-btn",onClick:function(){l(t)},children:Object(j.jsx)(b.b,{})}),Object(j.jsx)("p",{className:"item-amount",children:s}),Object(j.jsx)("button",{className:"cart-btn amount-btn",onClick:function(){u(t,s)},children:Object(j.jsx)(b.a,{})})]})]})}function p(){return Object(j.jsxs)("section",{className:"empty-cart section",children:[Object(j.jsx)("h2",{children:"empty cart ..."}),Object(j.jsx)(i.b,{to:"/products",className:"btn btn-primary",children:"fill it"})]})}var f=n.a.createContext();function g(e){var t=e.children,c=n.a.useState(localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{username:null,token:null}),r=Object(h.a)(c,2),a=r[0],s=r[1],i=n.a.useState({show:!1,msg:"",type:"success"}),o=Object(h.a)(i,2),l=o[0],b=o[1];return Object(j.jsx)(f.Provider,{value:{user:a,userLogin:function(e){s(e),localStorage.setItem("user",JSON.stringify(e))},userLogout:function(){s({username:null,token:null}),localStorage.removeItem("user")},alert:l,showAlert:function(e){var t=e.msg,c=e.type;b({show:!0,msg:t,type:void 0===c?"success":c})},hideAlert:function(){b(Object(u.a)(Object(u.a)({},l),{},{show:!1}))}},children:t})}function v(){var e=n.a.useContext(m),t=e.cart,c=e.total,r=n.a.useContext(f).user;return 0===t.length?Object(j.jsx)(p,{}):Object(j.jsxs)("section",{className:"cart-items section",children:[Object(j.jsx)("h2",{children:"your cart"}),t.map((function(e){return Object(j.jsx)(x,Object(u.a)({},e),e.id)})),Object(j.jsxs)("h2",{children:["total : $",c]}),r.token?Object(j.jsx)(i.b,{to:"/checkout",className:"btn btn-primary btn-block",children:"checkout"}):Object(j.jsx)(i.b,{to:"/login",className:"btn btn-primary btn-block",children:"login"})]})}var N=c(290),k=c(601),y=c(592),w=c(602),C=c(603),S=c(611),I=c(599),A=c(607),T=c(604),F=c(600),P=c(608),q=c(605),L=Object(N.a)("https://jsonplaceholder.typicode.com"),E=function(e){return Object(j.jsx)(w.a,Object(u.a)(Object(u.a)({},e),{},{children:Object(j.jsxs)(C.a,{children:[Object(j.jsx)(S.a,{source:"id"}),Object(j.jsx)(S.a,{source:"name"}),Object(j.jsx)(S.a,{source:"username"}),Object(j.jsx)(S.a,{source:"email"}),Object(j.jsx)(I.a,{basePath:"/users"})]})}))},J=function(e){return Object(j.jsx)(A.a,Object(u.a)(Object(u.a)({},e),{},{children:Object(j.jsxs)(T.a,{children:[Object(j.jsx)(F.a,{source:"username"}),Object(j.jsx)(F.a,{source:"email"}),Object(j.jsx)(F.a,{source:"password",options:{multiLine:!0}}),Object(j.jsx)(P.a,{source:"role",choices:[{id:"admin",name:"Admin"},{id:"manager",name:"Manager"},{id:"am",name:"Assistant Manager"}]})]})}))},M=function(e){return Object(j.jsx)(q.a,Object(u.a)(Object(u.a)({},e),{},{children:Object(j.jsxs)(T.a,{children:[Object(j.jsx)(F.a,{source:"username"}),Object(j.jsx)(F.a,{source:"email"}),Object(j.jsx)(F.a,{source:"password",options:{multiLine:!0}}),Object(j.jsx)(P.a,{source:"role",choices:[{id:"admin",name:"Admin"},{id:"manager",name:"Manager"},{id:"am",name:"Assistant Manager"}]})]})}))},$=function(){return Object(j.jsx)(k.a,{dataProvider:L,children:Object(j.jsx)(y.a,{name:"users",edit:M,list:E,create:J})})},B=c(45),D=c.n(B),z=c(70),_=c(124),H=c(108),K=c.n(H),U="http://localhost:1337";function V(){return(V=Object(z.a)(D.a.mark((function e(t){var c,r,n,a,s,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.name,r=t.total,n=t.items,a=t.stripeTokenId,s=t.userToken,e.next=3,K.a.post("".concat(U,"/orders"),{name:c,total:r,items:n,stripeTokenId:a},{headers:{Authorization:"Bearer ".concat(s)}}).catch((function(e){return console.log(e)}));case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=function(e){return V.apply(this,arguments)};var G=Object(_.injectStripe)((function(e){var t=n.a.useContext(m),c=t.cart,r=t.total,a=t.clearCart,s=n.a.useContext(f),i=s.user,l=s.showAlert,u=s.hideAlert,b=s.alert,d=Object(o.g)(),O=n.a.useState(""),x=Object(h.a)(O,2),g=x[0],v=x[1],N=n.a.useState(""),k=Object(h.a)(N,2),y=k[0],w=k[1],C=!g||b.show;function S(){return(S=Object(z.a)(D.a.mark((function t(n){var s,o,j;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l({msg:"submitting order... please wait!"}),n.preventDefault(),t.next=4,e.stripe.createToken().catch((function(e){return console.log(e)}));case 4:if(s=t.sent,console.log(s),!(o=s.token)){t.next=23;break}return w(""),j=o.id,t.next=12,W({name:g,total:r,items:c,stripeTokenId:j,userToken:i.token});case 12:if(!t.sent){t.next=20;break}return l({msg:"your order is complete"}),a(),d.push("/"),t.abrupt("return");case 20:l({msg:"there was an error with your order. please try again!",type:"danger"});case 21:t.next=25;break;case 23:u(),w(s.error.message);case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return 0===c.length?Object(j.jsx)(p,{}):Object(j.jsxs)("section",{className:"section form",children:[Object(j.jsx)("h2",{className:"section-title",children:"checkout"}),Object(j.jsxs)("form",{className:"checkout-form",children:[Object(j.jsxs)("h3",{children:["order total : ",Object(j.jsxs)("span",{children:[" $",r]})]}),Object(j.jsxs)("div",{className:"form-control",children:[Object(j.jsx)("label",{htmlFor:"name",children:"your name"}),Object(j.jsx)("input",{type:"text",id:"name",value:g,onChange:function(e){v(e.target.value)}})]}),Object(j.jsxs)("div",{className:"stripe-input",children:[Object(j.jsx)("label",{htmlFor:"card-element",children:"Credit or Debit Card"}),Object(j.jsxs)("p",{className:"stripe-info",children:["Test using this credit card : ",Object(j.jsx)("span",{children:"4242 4242 4242 4242"}),Object(j.jsx)("br",{}),"enter any 5 digits for the zip code",Object(j.jsx)("br",{}),"enter any 3 digits for the CVC"]})]}),Object(j.jsx)(_.CardElement,{className:"card-element"}),y&&Object(j.jsx)("p",{className:"form-empty",children:y}),C?Object(j.jsx)("p",{className:"form-empty",children:"please fill out name field"}):Object(j.jsx)("button",{type:"submit",onClick:function(e){return S.apply(this,arguments)},className:"btn btn-primary btn-block",children:"submit"})]})]})})),Q=function(){return Object(j.jsx)(_.StripeProvider,{apiKey:"pk_test_u98wkoUC9x1zM28B8icCPH1y008TT9DFrS",children:Object(j.jsx)(_.Elements,{children:Object(j.jsx)(G,{})})})};function R(){return Object(j.jsx)("section",{className:"error-page section",children:Object(j.jsxs)("div",{className:"error-container",children:[Object(j.jsx)("h1",{children:"oops! it's a dead end"}),Object(j.jsx)(i.b,{to:"/",className:"btn btn-primary",children:"back home"})]})})}function X(e){var t=e.children;return Object(j.jsx)("div",{children:Object(j.jsx)("div",{className:"hero",children:Object(j.jsxs)("div",{className:"banner",children:[Object(j.jsx)("h1",{children:"Buy Now"}),Object(j.jsx)("p",{children:"We have best products"}),t]})})})}function Y(e){var t=e.image,c=e.title,r=e.id,n=e.price;return Object(j.jsxs)("article",{className:"product",children:[Object(j.jsxs)("div",{className:"img-container",children:[Object(j.jsx)("img",{src:t,alt:c}),Object(j.jsx)(i.b,{to:"products/".concat(r),className:"btn btn-primary product-link",children:"details"})]}),Object(j.jsxs)("div",{className:"product-footer",children:[Object(j.jsx)("p",{className:"product-title",children:c}),Object(j.jsxs)("p",{className:"product-price",children:["$",n]})]})]})}function Z(e){var t=e.title,c=e.products;return Object(j.jsxs)("section",{className:"section",children:[Object(j.jsx)("h2",{className:"section-title",children:t}),Object(j.jsx)("div",{className:"products-center",children:c.map((function(e){return Object(r.createElement)(Y,Object(u.a)(Object(u.a)({},e),{},{key:e.id}))}))})]})}var ee=n.a.createContext();function te(e){var t=e.children,c=n.a.useState(!1),r=Object(h.a)(c,2),a=r[0],s=r[1],i=n.a.useState([]),o=Object(h.a)(i,2),l=o[0],b=o[1],d=n.a.useState([]),m=Object(h.a)(d,2),O=m[0],x=m[1];return n.a.useEffect((function(){s(!0),fetch("".concat("https://gorest.co.in/public-api","/products")).then((function(e){return e.json()})).then((function(e){var t=e.data.map((function(e){var t=e.image;return Object(u.a)(Object(u.a)({},e),{},{image:t})})),c=function(e){return e.filter((function(e){return e.id<5}))}(t);b(t),x(c),s(!1)}))}),[]),Object(j.jsx)(ee.Provider,{value:{products:l,loading:a,featured:O},children:t})}var ce=c.p+"static/media/loading.a62c0b1f.gif";function re(){return Object(j.jsxs)("div",{className:"loading",children:[Object(j.jsx)("h2",{children:"loading..."}),Object(j.jsx)("img",{src:ce,alt:"loading gif"})]})}function ne(){var e=n.a.useContext(ee),t=e.loading,c=e.featured;return t?Object(j.jsx)(re,{}):Object(j.jsx)(Z,{title:"featured products",products:c})}function ae(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(X,{children:Object(j.jsx)(i.b,{to:"/products",className:"btn btn-primary btn-hero",children:"our products"})}),Object(j.jsx)(ne,{})]})}function se(){return(se=Object(z.a)(D.a.mark((function e(t){var c,r,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.email,r=t.password,e.next=3,K.a.post("".concat(U,"/auth/local"),{identifier:c,password:r}).catch((function(e){return console.log(e)}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=function(e){return se.apply(this,arguments)};function oe(){return(oe=Object(z.a)(D.a.mark((function e(t){var c,r,n,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.email,r=t.password,n=t.username,e.next=3,K.a.post("".concat(U,"/auth/local/register"),{username:n,email:c,password:r}).catch((function(e){return console.log(e)}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var je=function(e){return oe.apply(this,arguments)};function le(){var e=Object(o.g)(),t=n.a.useContext(f),c=t.userLogin,r=t.showAlert,a=t.alert,s=n.a.useState(""),i=Object(h.a)(s,2),l=i[0],u=i[1],b=n.a.useState(""),d=Object(h.a)(b,2),m=d[0],O=d[1],x=n.a.useState("default"),p=Object(h.a)(x,2),g=p[0],v=p[1],N=n.a.useState(!0),k=Object(h.a)(N,2),y=k[0],w=k[1],C=!l||!m||!g||a.show,S=function(){var t=Object(z.a)(D.a.mark((function t(n){var a,s,i,o;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r({msg:"accesing user data. please wait..."}),n.preventDefault(),!y){t.next=8;break}return t.next=5,ie({email:l,password:m});case 5:a=t.sent,t.next=11;break;case 8:return t.next=10,je({email:l,password:m,username:g});case 10:a=t.sent;case 11:a?(s=a.data,i=s.jwt,o=s.user.username,c({token:i,username:o}),r({msg:"you are logged in : ".concat(o,". shop away my friend!")}),e.push("/products")):r({msg:"there was an error. please try again...",type:"danger"});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsxs)("section",{className:"form section",children:[Object(j.jsx)("h2",{className:"section-title",children:y?"sign in":"register"}),Object(j.jsxs)("form",{className:"login-form",children:[Object(j.jsxs)("div",{className:"form-control",children:[Object(j.jsx)("label",{htmlFor:"email",children:"email"}),Object(j.jsx)("input",{type:"email",id:"email",value:l,onChange:function(e){return u(e.target.value)}})]}),Object(j.jsxs)("div",{className:"form-control",children:[Object(j.jsx)("label",{htmlFor:"password",children:"password"}),Object(j.jsx)("input",{type:"password",id:"password",value:m,onChange:function(e){return O(e.target.value)}})]}),!y&&Object(j.jsxs)("div",{className:"form-control",children:[Object(j.jsx)("label",{html:"username",children:"username"}),Object(j.jsx)("input",{type:"text",id:"username",value:g,onChange:function(e){return v(e.target.value)}})]}),C&&Object(j.jsx)("p",{className:"form-empty",children:"please fill out all form fields"}),!C&&Object(j.jsx)("button",{type:"submit",className:"btn btn-block btn-primary",onClick:S,children:"submit"}),Object(j.jsxs)("p",{className:"register-link",children:[y?"need to register?":"already a member?",Object(j.jsx)("button",{type:"button",onClick:function(){w((function(e){var t=!e;return v(t?"default":""),t}))},children:"click here"})]})]})]})}function ue(){var e=n.a.useContext(ee),t=e.loading,c=e.products;return t?Object(j.jsx)(re,{}):Object(j.jsx)(Z,{title:"our products",products:c})}function be(){var e=Object(o.i)().id,t=n.a.useContext(ee).products,c=n.a.useContext(m).addToCart,r=t.find((function(t){return t.id===parseInt(e)})),a=Object(o.g)();if(0===t.length)return Object(j.jsx)("p",{className:"loading",children:"loading data..."});var s=r.image,i=r.title,l=r.price,u=r.description;return Object(j.jsxs)("section",{className:"single-product",children:[Object(j.jsx)("img",{src:s,alt:i,className:"single-product-image"}),Object(j.jsxs)("article",{children:[Object(j.jsx)("h1",{children:i}),Object(j.jsxs)("h2",{children:["$",l]}),Object(j.jsx)("p",{children:u}),Object(j.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){c(r),a.push("/cart")},children:"add to cart"})]})]})}c.p;function de(){var e=n.a.useContext(m).cartItems;return Object(j.jsxs)("div",{className:"cart-link-container",children:[Object(j.jsx)(i.b,{to:"/cart",children:"cart"}),Object(j.jsx)("span",{className:"cart-link-total",children:e})]})}function he(){var e=n.a.useContext(f),t=e.user,c=e.userLogout,r=n.a.useContext(m).clearCart;return t.token?Object(j.jsx)("button",{onClick:function(){c(),r()},className:"login-btn",children:"logout"}):Object(j.jsx)(i.b,{to:"/login",children:"login"})}function me(){var e=n.a.useContext(f).user;return Object(j.jsx)("header",{className:"header",children:Object(j.jsx)("nav",{children:Object(j.jsxs)("ul",{children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("li",{children:Object(j.jsx)(i.b,{to:"/",children:"home"})}),Object(j.jsx)("li",{children:Object(j.jsx)(i.b,{to:"/about",children:"about"})}),Object(j.jsx)("li",{children:Object(j.jsx)(i.b,{to:"/products",children:"products"})}),e.token&&Object(j.jsx)("li",{children:Object(j.jsx)(i.b,{to:"/checkout",children:"checkout"})})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("li",{children:Object(j.jsx)(he,{})}),Object(j.jsx)("li",{children:Object(j.jsx)(de,{})})]})]})})})}function Oe(){var e=n.a.useContext(f),t=e.alert,c=e.hideAlert,r="alert-container";return t.show&&(r+=" alert-show","danger"===t.type&&(r+=" alert-danger")),Object(j.jsx)("div",{className:r,children:Object(j.jsxs)("div",{className:"alert",children:[Object(j.jsx)("p",{children:t.show&&t.msg}),Object(j.jsx)("button",{className:"alert-close",onClick:c,children:Object(j.jsx)(b.c,{})})]})})}var xe=c(330);function pe(e){var t=e.children,c=Object(xe.a)(e,["children"]),r=n.a.useContext(f).user;return Object(j.jsx)(o.b,Object(u.a)(Object(u.a)({},c),{},{render:function(){return r.token?t:Object(j.jsx)(o.a,{to:"/login"})}}))}var fe=function(){return Object(j.jsxs)(i.a,{children:[Object(j.jsx)(Oe,{}),Object(j.jsxs)(o.d,{children:[Object(j.jsxs)(o.b,{exact:!0,path:"/",children:[Object(j.jsx)(me,{}),Object(j.jsx)(ae,{})]}),Object(j.jsxs)(o.b,{exact:!0,path:"/about",children:[Object(j.jsx)(me,{}),Object(j.jsx)(l,{})]}),Object(j.jsxs)(o.b,{exact:!0,path:"/cart",children:[Object(j.jsx)(me,{}),Object(j.jsx)(v,{})]}),Object(j.jsxs)(o.b,{exact:!0,path:"/login",children:[Object(j.jsx)(me,{}),Object(j.jsx)(le,{})]}),Object(j.jsxs)(pe,{path:"/checkout",name:"john",children:[Object(j.jsx)(me,{}),Object(j.jsx)(Q,{})]}),Object(j.jsxs)(o.b,{exact:!0,path:"/products",children:[Object(j.jsx)(me,{}),Object(j.jsx)(ue,{})]}),Object(j.jsx)(o.b,{exact:!0,path:"/admin",children:Object(j.jsx)($,{})}),Object(j.jsx)(o.b,{path:"/products/:id",children:Object(j.jsx)(be,{})}),Object(j.jsx)(o.b,{path:"*",children:Object(j.jsx)(R,{})})]})]})};s.a.render(Object(j.jsx)(g,{children:Object(j.jsx)(te,{children:Object(j.jsx)(O,{children:Object(j.jsx)(fe,{})})})}),document.getElementById("root"))}},[[524,1,2]]]);
//# sourceMappingURL=main.36e34559.chunk.js.map